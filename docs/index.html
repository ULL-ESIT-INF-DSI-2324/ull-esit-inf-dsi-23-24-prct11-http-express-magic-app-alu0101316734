<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-alu0101316734</title><meta name="description" content="Documentation for ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-alu0101316734"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-alu0101316734</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-alu0101316734</h2></div><div class="tsd-panel tsd-typography"><a id="md:practica-11-cartas-magic-con-express" class="tsd-anchor"></a><h1><a href="#md:practica-11-cartas-magic-con-express">Practica 11 Cartas Magic con express</a></h1><a id="md:funcionamiento" class="tsd-anchor"></a><h2><a href="#md:funcionamiento">Funcionamiento</a></h2><p>En el servidor: <code>node dist/index.js</code> o si se prefiere hacer en una terminal <code>node dist/index.js &amp;</code></p>
<p>Para el cliente: <code>http://localhost:3000/cards?[argumentos del query] + body  si fuera necesario</code></p>
<a id="md:introducción" class="tsd-anchor"></a><h2><a href="#md:introducción">Introducción</a></h2><p>En esta práctica el objetivo es familializarse con la aplicación llamada <code>express</code> la cual nos permite hacer una petición.Nosotros usaremos el protocolo <code>http</code>.Para ello haremos una aplicación en la cual gestionaremos una colección de cartas magic.Además haremos uso de la API asincrono de nodejs para gestionar los archivos.Las cartas se guarndan en el directorios del nombre del usuario.que estos directorios son subdirectorios de un directorio <code>/usuarios</code>.</p>
<a id="md:objetivos" class="tsd-anchor"></a><h2><a href="#md:objetivos">Objetivos</a></h2><ul>
<li><p><strong>Uso de express</strong></p>
</li>
<li><p><strong>Api asincrona de ficheros de nodejs usando callbacks</strong></p>
</li>
<li><p><strong>El uso del paquete request</strong></p>
</li>
</ul>
<a id="md:clases-y-código" class="tsd-anchor"></a><h2><a href="#md:clases-y-código">Clases y código</a></h2><a id="md:servidor" class="tsd-anchor"></a><h3><a href="#md:servidor">Servidor</a></h3><p>Esta es la clase principal en la cual creamos el app expresss además usamos la linea <strong>this.app.use(express.json())</strong> para suponer que nos llega un json del body de la petición.El unico método publico que tiene esta clase es <code>start</code> el cual llama al método listen  de <strong>app</strong>,el cual contiene el método <code>express()</code> para llamar a sus funciones,además llamamos al método del servidor llamodos <code>verbs</code> que contiene los vebos de las peticiones y sus implementaciones correspondiente.</p>
<pre><code class="language-ts"><br/><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">Server</span><span class="hl-1">{</span><br/><br/><span class="hl-1">    </span><span class="hl-0">private</span><span class="hl-1"> </span><span class="hl-3">app</span><span class="hl-1">:</span><span class="hl-2">Application</span><span class="hl-1">;</span><br/><br/><span class="hl-1"> </span><span class="hl-0">constructor</span><span class="hl-1">( </span><span class="hl-0">private</span><span class="hl-1"> </span><span class="hl-3">port</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">)</span><br/><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">app</span><span class="hl-1">=</span><span class="hl-4">express</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-4">configure</span><span class="hl-1">()</span><br/><span class="hl-1"> }</span><br/><br/><span class="hl-1">  </span><span class="hl-0">private</span><span class="hl-1"> </span><span class="hl-4">configure</span><span class="hl-1">():</span><span class="hl-2">void</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">app</span><span class="hl-1">.</span><span class="hl-4">use</span><span class="hl-1">(</span><span class="hl-3">express</span><span class="hl-1">.</span><span class="hl-4">json</span><span class="hl-1">())</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-0">private</span><span class="hl-1"> </span><span class="hl-4">verbos</span><span class="hl-1">():</span><span class="hl-2">void</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">//Codigo espesifico de cada verbo </span><br/><span class="hl-1">  }</span><br/><span class="hl-1"> </span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-4">start</span><span class="hl-1">():</span><span class="hl-2">void</span><br/><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-4">verbos</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">app</span><span class="hl-1">.</span><span class="hl-4">listen</span><span class="hl-1">(</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">port</span><span class="hl-1">,()</span><span class="hl-0">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">        </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Servidor conectado&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    })</span><br/><span class="hl-1"> }</span><br/><span class="hl-1">}</span><br/>
</code><button>Copy</button></pre>
<p>Si en el query no se especifica un error devolvera un <em>error400</em>.</p>
<a id="md:gestor-de-fichero" class="tsd-anchor"></a><h3><a href="#md:gestor-de-fichero">Gestor de Fichero</a></h3><p>Esta clase es igual que la práctica anterior.Ultliza la api asincrona de <code>node.js</code> basada en callbacks.Para empezar el constructor tiene un <em>string</em> que lo usaremos para los usuarios.Los métodos son los siguientes.</p>
<a id="md:escribir-fichero" class="tsd-anchor"></a><h4><a href="#md:escribir-fichero">escribir fichero</a></h4><p>En este método comprobamos si el directorio del usuario existe en su defecto lo creamos.Y entonces la carta pasada por parametro la introducimos para leer.Si hay algun error se devielve el error en caso contrario se devuelve <em>undefined</em> en el callback</p>
<pre><code class="language-ts"><span class="hl-1">        </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-4">access</span><span class="hl-1">(</span><span class="hl-6">&#39;./usuarios/&#39;</span><span class="hl-1">+ </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">nombre_usuario</span><span class="hl-1">,(</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">          </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">          {</span><br/><span class="hl-1">              </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-4">mkdir</span><span class="hl-1">(</span><span class="hl-6">&#39;./usuarios/&#39;</span><span class="hl-1">+ </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">nombre_usuario</span><span class="hl-1">,(</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">                 </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">                 {</span><br/><span class="hl-1">                    </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">                 }</span><span class="hl-7">else</span><br/><span class="hl-1">                 {</span><br/><span class="hl-1">                  </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-4">writeFile</span><span class="hl-1">(</span><span class="hl-6">&#39;./usuarios/&#39;</span><span class="hl-1">+ </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">nombre_usuario</span><span class="hl-1"> + </span><span class="hl-6">&#39;/&#39;</span><span class="hl-1">+</span><span class="hl-3">Carta</span><span class="hl-1">.</span><span class="hl-3">nombre</span><span class="hl-1"> + </span><span class="hl-6">&#39;.json&#39;</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">,(</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">                    </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">                    {</span><br/><span class="hl-1">                            </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                    </span><span class="hl-7">else</span><br/><span class="hl-1">                    {</span><br/><span class="hl-1">                      </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">)</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">            </span><br/><span class="hl-1">                    })</span><br/><span class="hl-1">                 }</span><br/><span class="hl-1">              })</span><br/><span class="hl-1">          }</span><span class="hl-7">else</span><br/><span class="hl-1">          {</span><br/><span class="hl-1">            </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-4">writeFile</span><span class="hl-1">(</span><span class="hl-6">&#39;./usuarios/&#39;</span><span class="hl-1">+ </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">nombre_usuario</span><span class="hl-1"> + </span><span class="hl-6">&#39;/&#39;</span><span class="hl-1">+</span><span class="hl-3">Carta</span><span class="hl-1">.</span><span class="hl-3">nombre</span><span class="hl-1"> + </span><span class="hl-6">&#39;.json&#39;</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">,(</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">              </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">              {</span><br/><span class="hl-1">                </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">(</span><span class="hl-6">&#39;El error al escribir un archivo&#39;</span><span class="hl-1">,</span><span class="hl-3">err</span><span class="hl-1">.</span><span class="hl-3">message</span><span class="hl-1">);</span><br/><span class="hl-1">                      </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">              </span><span class="hl-7">else</span><br/><span class="hl-1">              {</span><br/><span class="hl-1">                </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">)</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">      </span><br/><span class="hl-1">              })</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        })</span>
</code><button>Copy</button></pre>
<a id="md:mostrar-archivo" class="tsd-anchor"></a><h4><a href="#md:mostrar-archivo">mostrar archivo</a></h4><p>en este caso mostrará el todos los archivos de la colecion del usuario para ello comprobamos que existe el directorio y usamos la fucnion <code>readdir</code> que nos devuelve un vector de todos los nombres de los archivos el directorio. una vez hecho esto usamos un <code>foreach</code> y luego más tarde leemos el archivo el cual lo almacenamos en un vector y lo devolvemos.En caso de dar error devolvemos el error.Por ultimo usamos una variable llamada <strong>archivos leidos</strong> en la cual contamos el numero de archivos para asegurar que se han termiando de leer todos los archivos.</p>
<pre><code class="language-ts"><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-4">readdir</span><span class="hl-1">(</span><span class="hl-3">path</span><span class="hl-1">, (</span><span class="hl-3">err</span><span class="hl-1">, </span><span class="hl-3">archivos</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">, </span><span class="hl-0">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">                        </span><span class="hl-7">return</span><span class="hl-1">;</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">cartas</span><span class="hl-1">:</span><span class="hl-2">Union</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">                    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">archivosLeidos</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">;</span><br/><span class="hl-1">                    </span><span class="hl-3">archivos</span><span class="hl-1">.</span><span class="hl-4">forEach</span><span class="hl-1">((</span><span class="hl-3">archivo</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-4">readFile</span><span class="hl-1">(</span><span class="hl-3">path</span><span class="hl-1"> + </span><span class="hl-6">&#39;/&#39;</span><span class="hl-1"> + </span><span class="hl-3">archivo</span><span class="hl-1">, (</span><span class="hl-3">err</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                            </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">) {</span><br/><span class="hl-1">                                </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">, </span><span class="hl-0">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">                                </span><span class="hl-7">return</span><span class="hl-1">;</span><br/><span class="hl-1">                            }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><br/><span class="hl-1">                            </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-9">argv</span><span class="hl-1"> = </span><span class="hl-9">JSON</span><span class="hl-1">.</span><span class="hl-4">parse</span><span class="hl-1">(</span><span class="hl-3">data</span><span class="hl-1">.</span><span class="hl-4">toString</span><span class="hl-1">());</span><br/><span class="hl-1">                            </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">carta</span><span class="hl-1">:</span><span class="hl-2">Carta_Planeswalker</span><span class="hl-1"> | </span><span class="hl-2">Carta</span><span class="hl-1"> | </span><span class="hl-2">Carta_Criatura</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><br/><span class="hl-1">                            </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">estadistica</span><span class="hl-1"> !== </span><span class="hl-0">undefined</span><span class="hl-1"> &amp;&amp; </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">lealtad</span><span class="hl-1"> === </span><span class="hl-0">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">                                </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-9">estadistica</span><span class="hl-1"> = </span><span class="hl-9">JSON</span><span class="hl-1">.</span><span class="hl-4">parse</span><span class="hl-1">(</span><span class="hl-4">String</span><span class="hl-1">(</span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">estadistica</span><span class="hl-1">));</span><br/><span class="hl-1">                                </span><span class="hl-3">carta</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-4">Carta_Criatura</span><span class="hl-1">(</span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">nombre</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">coste</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">color</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">tipo</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">rareza</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">texto</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">valor</span><span class="hl-1">, [</span><span class="hl-3">estadistica</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">], </span><span class="hl-3">estadistica</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">]]);</span><br/><span class="hl-1">                            } </span><span class="hl-7">else</span><span class="hl-1"> </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">estadistica</span><span class="hl-1"> === </span><span class="hl-0">undefined</span><span class="hl-1"> &amp;&amp; </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">lealtad</span><span class="hl-1"> !== </span><span class="hl-0">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">                                </span><span class="hl-3">carta</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-4">Carta_Planeswalker</span><span class="hl-1">(</span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">nombre</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">coste</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">color</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">tipo</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">rareza</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">texto</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">valor</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">lealtad</span><span class="hl-1">);</span><br/><span class="hl-1">                            } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                                </span><span class="hl-3">carta</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-4">Carta</span><span class="hl-1">(</span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">nombre</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">coste</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">color</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">tipo</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">rareza</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">texto</span><span class="hl-1">, </span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">valor</span><span class="hl-1">);</span><br/><span class="hl-1">                            }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><br/><span class="hl-1">                            </span><span class="hl-3">cartas</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-3">carta</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><br/><span class="hl-1">                            </span><span class="hl-3">archivosLeidos</span><span class="hl-1">++;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                            </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">archivosLeidos</span><span class="hl-1"> === </span><span class="hl-3">archivos</span><span class="hl-1">.</span><span class="hl-3">length</span><span class="hl-1">) {</span><br/><span class="hl-1">                              </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">, </span><span class="hl-3">cartas</span><span class="hl-1">);</span><br/><span class="hl-1">                          }</span>
</code><button>Copy</button></pre>
<a id="md:search-archivos" class="tsd-anchor"></a><h4><a href="#md:search-archivos">search archivos</a></h4><p>Es muy similar al anterior la diferencia es que en vez de devolver un vector de cartas devolvemos una carta que sera con la que el id coincida.</p>
<pre><code class="language-ts"><span class="hl-1">                              </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-9">ID</span><span class="hl-1"> === </span><span class="hl-3">id_buscar</span><span class="hl-1">) {</span><br/><span class="hl-1">                                  </span><span class="hl-3">carta_encontrada</span><span class="hl-1"> = </span><span class="hl-0">true</span><span class="hl-1">;</span><br/><span class="hl-1">                                  </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">, </span><span class="hl-3">carta</span><span class="hl-1">);</span><br/><span class="hl-1">                              }</span>
</code><button>Copy</button></pre>
<a id="md:borrar-archivo" class="tsd-anchor"></a><h4><a href="#md:borrar-archivo">borrar archivo</a></h4><p>Nuevamente este método es muy similar al anterior con la diferencia que tenenemos que usar <code>unlink</code> para poder borrar el archivo además de buscarlo como haciamos en la anterior.</p>
<pre><code class="language-ts"><span class="hl-1">                </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">dataJSON</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1"> === </span><span class="hl-3">id</span><span class="hl-1">)</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                  </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-4">unlink</span><span class="hl-1">(</span><span class="hl-3">path</span><span class="hl-1"> + </span><span class="hl-6">&#39;/&#39;</span><span class="hl-1"> + </span><span class="hl-3">element</span><span class="hl-1">,(</span><span class="hl-3">err</span><span class="hl-1">)</span><span class="hl-0">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">                    </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">                    {</span><br/><span class="hl-1">                      </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">                    }</span><span class="hl-7">else</span><br/><span class="hl-1">                    {</span><br/><span class="hl-1">                      </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">)</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                 })</span><br/><span class="hl-1">                }</span>
</code><button>Copy</button></pre>
<a id="md:modificar-archivo" class="tsd-anchor"></a><h4><a href="#md:modificar-archivo">Modificar archivo</a></h4><p>Por ultimo método el modifcar archivo,este es el más complejo de todos porque aparte de buscar tenemos que hacer operaciones como <code>for (const [nombreAtributo, valorNuevo] of Object.entries(atributos)) {</code> esto hace que itera sobre un objeto interface llamado atributos que posee atribuots opcionales sobre los  atributos que elk usuario desa modificar.Si el atributo es <em>undefined</em> no se cambiara poero si no lo es modifcaleremos corespondientemente.Por último escribimos el archivo con los atributos modficados</p>
<pre><code class="language-ts"><span class="hl-1">                     </span><span class="hl-7">for</span><span class="hl-1"> (</span><span class="hl-0">const</span><span class="hl-1"> [</span><span class="hl-9">nombreAtributo</span><span class="hl-1">, </span><span class="hl-9">valorNuevo</span><span class="hl-1">] </span><span class="hl-0">of</span><span class="hl-1"> </span><span class="hl-3">Object</span><span class="hl-1">.</span><span class="hl-4">entries</span><span class="hl-1">(</span><span class="hl-3">atributos</span><span class="hl-1">)) {</span><br/><span class="hl-1">                      </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">valorNuevo</span><span class="hl-1"> !== </span><span class="hl-0">undefined</span><span class="hl-1">)</span><br/><span class="hl-1">                      </span><span class="hl-7">switch</span><span class="hl-1">(</span><span class="hl-3">nombreAtributo</span><span class="hl-1">)</span><br/><span class="hl-1">                      {</span><br/><span class="hl-1">                        </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;ID&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-9">ID</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                          </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;nombre&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">nombre</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                          </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;tipo&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">tipo</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                          </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;color&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">color</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                          </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;rareza&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">rareza</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                          </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;texto&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">texto</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                          </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;coste&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">coste</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                          </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                        </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;valor&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">valor</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                          </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                      }</span><br/><span class="hl-1">                      </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">carta</span><span class="hl-1"> </span><span class="hl-0">instanceof</span><span class="hl-1"> </span><span class="hl-2">Carta_Criatura</span><span class="hl-1">)</span><br/><span class="hl-1">                      {</span><br/><span class="hl-1">                        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">nombreAtributo</span><span class="hl-1"> === </span><span class="hl-6">&#39;fuerza&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-3">valorNuevo</span><span class="hl-1"> !== </span><span class="hl-0">undefined</span><span class="hl-1">)</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">estadistica</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">]=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                        </span><span class="hl-7">else</span><span class="hl-1"> </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">nombreAtributo</span><span class="hl-1"> === </span><span class="hl-6">&#39;vida&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">estadistica</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">]=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                      }</span><br/><span class="hl-1">                      </span><span class="hl-7">if</span><span class="hl-1">( </span><span class="hl-3">carta</span><span class="hl-1"> </span><span class="hl-0">instanceof</span><span class="hl-1"> </span><span class="hl-2">Carta_Planeswalker</span><span class="hl-1">)</span><br/><span class="hl-1">                        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">nombreAtributo</span><span class="hl-1"> === </span><span class="hl-6">&#39;lealtad&#39;</span><span class="hl-1">&amp;&amp; </span><span class="hl-3">valorNuevo</span><span class="hl-1"> !== </span><span class="hl-0">undefined</span><span class="hl-1">)</span><br/><span class="hl-1">                          </span><span class="hl-3">carta</span><span class="hl-1">.</span><span class="hl-3">lealtad</span><span class="hl-1">=</span><span class="hl-3">valorNuevo</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-9">stringJSON</span><span class="hl-1">=</span><span class="hl-9">JSON</span><span class="hl-1">.</span><span class="hl-4">stringify</span><span class="hl-1">(</span><span class="hl-3">carta</span><span class="hl-1">)</span><br/><span class="hl-1">                    </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-4">writeFile</span><span class="hl-1">(</span><span class="hl-3">path</span><span class="hl-1"> + </span><span class="hl-6">&#39;/&#39;</span><span class="hl-1"> +</span><span class="hl-3">element</span><span class="hl-1">,</span><span class="hl-3">stringJSON</span><span class="hl-1">,(</span><span class="hl-3">err</span><span class="hl-1">)</span><span class="hl-0">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">                      </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">                        {</span><br/><span class="hl-1">                          </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">)</span><br/><span class="hl-1">                        }</span><br/><span class="hl-1">                        </span><span class="hl-7">else</span><br/><span class="hl-1">                        {</span><br/><span class="hl-1">                          </span><span class="hl-4">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">)</span><br/><span class="hl-1">                        }</span><br/><span class="hl-1">                   }) </span>
</code><button>Copy</button></pre>
<a id="md:carta" class="tsd-anchor"></a><h3><a href="#md:carta">Carta</a></h3><p>hablaremos de la clase principal que es <code>Carta</code></p>
<pre><code class="language-ts"><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">Carta</span><span class="hl-1"> </span><span class="hl-0">implements</span><span class="hl-1"> </span><span class="hl-2">Carta_interface</span><br/><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-0">constructor</span><span class="hl-1">(</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">ID</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">nombre</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">coste</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">color</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">tipo</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">rareza</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">texto</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">valor</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">)</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">//Construye la carta con los atributos correspondientes</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-4">toJSON</span><span class="hl-1">()</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">//Pasa la clase a formato JSON </span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>La clase su principalfuncion es almacenar los atributos pasados por constructor y una vez hecho esto definir un <code>toJSON</code> para pasar el formato <em>JSON</em>.</p>
<a id="md:criatura" class="tsd-anchor"></a><h3><a href="#md:criatura">Criatura</a></h3><p>En cuanto a otras clases tenesos esta:</p>
<pre><code class="language-ts"><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">Carta_Criatura</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-2">Carta</span><br/><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-0">constructor</span><span class="hl-1">(</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">ID</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">nombre</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">coste</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">color</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">tipo</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">rareza</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">texto</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">valor</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">estadistica</span><span class="hl-1">:</span><span class="hl-2">stats</span><span class="hl-1">)</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">       </span><span class="hl-5">// construimos a base de la clase heredada</span><br/><span class="hl-1">    }    </span><br/><span class="hl-1">    </span><span class="hl-4">toJSON</span><span class="hl-1">()</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">// añadimos los atributos extras</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Esta clase es una clase particular del tipo de carta porque necesita un atributo necesario como es estadistica.Luego el nuevo atributo lo añadimos en el toJSON para poder pasarlo a <em>JSON</em> también.</p>
<a id="md:planeswalker" class="tsd-anchor"></a><h3><a href="#md:planeswalker">Planeswalker</a></h3><p>La otra clase es muy parecida a la anterior dado que el tipo de carta tiene un atributo el cual no tiene el tipo de carta genérico.</p>
<pre><code class="language-ts"><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">Cartas_Planeswalker</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-2">Carta</span><br/><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-0">constructor</span><span class="hl-1">(</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">ID</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">nombre</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">coste</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">color</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">tipo</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">rareza</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">texto</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">valor</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">,</span><span class="hl-0">public</span><span class="hl-1"> </span><span class="hl-3">lealtad</span><span class="hl-1">:</span><span class="hl-2">number</span><span class="hl-1">)</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-5">// construimos a base de la clase heredada</span><br/><span class="hl-1">    }       </span><br/><span class="hl-1">    </span><span class="hl-4">toJSON</span><span class="hl-1">() {</span><br/><span class="hl-1">         </span><span class="hl-5">// añadimos los atributos extras</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:peticiones" class="tsd-anchor"></a><h2><a href="#md:peticiones">Peticiones</a></h2><a id="md:add" class="tsd-anchor"></a><h3><a href="#md:add">Add</a></h3><p>Se gestiona usando el verbo <code>post</code> y pasando en el query el usuario y el body un json con la carta a añadir ejemplo:</p>
<p><code>http://localhost:3000/cards?user=emilio</code></p>
<pre><code class="language-JSON"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;id&quot;</span><span class="hl-1">: </span><span class="hl-8">4</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;nombre&quot;</span><span class="hl-1"> : </span><span class="hl-6">&quot;Planeswalker&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;color&quot;</span><span class="hl-1">: </span><span class="hl-6">&quot;negro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;coste&quot;</span><span class="hl-1">: </span><span class="hl-8">4</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;tipo&quot;</span><span class="hl-1">: </span><span class="hl-6">&quot;Planeswalker&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;rareza&quot;</span><span class="hl-1">: </span><span class="hl-6">&quot;mitica&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;texto&quot;</span><span class="hl-1">: </span><span class="hl-6">&quot;Una carta de Planeswalker&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;valor&quot;</span><span class="hl-1">: </span><span class="hl-8">10</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;lealtad&quot;</span><span class="hl-1">: </span><span class="hl-8">3</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:list" class="tsd-anchor"></a><h3><a href="#md:list">List</a></h3><p>Se gestiona usando el verbo <code>get</code> y pasando en el query el usuario ejemplo:</p>
<p><code>http://localhost:3000/cards?user=emilio</code></p>
<a id="md:search" class="tsd-anchor"></a><h3><a href="#md:search">Search</a></h3><p>Se gestiona usando el verbo <code>get</code> y pasando en el query el usuario y el id de la carta a buscar ejemplo:</p>
<p><code>http://localhost:3000/cards?user=emilio&amp;id=1</code></p>
<a id="md:delete" class="tsd-anchor"></a><h3><a href="#md:delete">Delete</a></h3><p>Se gestiona usando el verbo <code>delete</code> y pasando en el query el usuario y el id de la carta a eliminar ejemplo:</p>
<p><code>http://localhost:3000/cards?user=emilio&amp;id=1</code></p>
<a id="md:modify" class="tsd-anchor"></a><h3><a href="#md:modify">Modify</a></h3><p>Se gestiona usando el verbo <code>patch</code> y pasando en el query el usuario y el id de la carta a modifcar.Además de pasarle en el bodu un json cn los atributos a modicar ejemplo:</p>
<p><code>http://localhost:3000/cards?user=emilio&amp;id=1</code></p>
<pre><code class="language-JSON"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">&quot;texto&quot;</span><span class="hl-1">: </span><span class="hl-6">&quot;texto modifcado&quot;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:test" class="tsd-anchor"></a><h2><a href="#md:test">Test</a></h2><p>Para esta practica hemos hecho los test usando el paquete <code>request</code> este paquete nos permite gestionar las peticiones mucho más fácil y además nos ha permitido hacer más facil los test.Lo unico que cambiamos y fue diferente los action para poder ejecutar el servidor en la maquina donde se ejecuta los actions.</p>
<a id="md:conclusines" class="tsd-anchor"></a><h2><a href="#md:conclusines">Conclusines</a></h2><p>En esta práctica nos hemos centrado en uso de express y ultlizar tambien <code>request</code>.También usamos thunder client para comprobar el funcioanmiento de la misma.Si bien el uso de express y el uso de thunder client no fue muy complicado si fue un poco más díficil usar el paquete <code>request</code> porque cuando enviaba un error de status request no lo interpretaba como error si no como una respuesta.El gestor de ficheros lo reultlice de la práctica pasada, en general no ha sido una practica díficil.</p>
<a id="md:bibliografia" class="tsd-anchor"></a><h2><a href="#md:bibliografia">Bibliografia</a></h2><p>[typedoc] (<a href="https://typedoc.org">https://typedoc.org</a>)</p>
<p>[typescript] (<a href="https://www.typescriptlang.org/docs/">https://www.typescriptlang.org/docs/</a>)</p>
<p>[nodejs] (<a href="https://nodejs.org/en">https://nodejs.org/en</a>)</p>
<p>[javascript] (<a href="https://developer.mozilla.org/es/docs/Web/JavaScript">https://developer.mozilla.org/es/docs/Web/JavaScript</a>)</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:practica-11-cartas-magic-con-express"><span>Practica 11 <wbr/>Cartas <wbr/>Magic con express</span></a><ul><li><a href="#md:funcionamiento"><span>Funcionamiento</span></a></li><li><a href="#md:introducción"><span>Introducción</span></a></li><li><a href="#md:objetivos"><span>Objetivos</span></a></li><li><a href="#md:clases-y-código"><span>Clases y código</span></a></li><li><ul><li><a href="#md:servidor"><span>Servidor</span></a></li><li><a href="#md:gestor-de-fichero"><span>Gestor de <wbr/>Fichero</span></a></li><li><ul><li><a href="#md:escribir-fichero"><span>escribir fichero</span></a></li><li><a href="#md:mostrar-archivo"><span>mostrar archivo</span></a></li><li><a href="#md:search-archivos"><span>search archivos</span></a></li><li><a href="#md:borrar-archivo"><span>borrar archivo</span></a></li><li><a href="#md:modificar-archivo"><span>Modificar archivo</span></a></li></ul></li><li><a href="#md:carta"><span>Carta</span></a></li><li><a href="#md:criatura"><span>Criatura</span></a></li><li><a href="#md:planeswalker"><span>Planeswalker</span></a></li></ul></li><li><a href="#md:peticiones"><span>Peticiones</span></a></li><li><ul><li><a href="#md:add"><span>Add</span></a></li><li><a href="#md:list"><span>List</span></a></li><li><a href="#md:search"><span>Search</span></a></li><li><a href="#md:delete"><span>Delete</span></a></li><li><a href="#md:modify"><span>Modify</span></a></li></ul></li><li><a href="#md:test"><span>Test</span></a></li><li><a href="#md:conclusines"><span>Conclusines</span></a></li><li><a href="#md:bibliografia"><span>Bibliografia</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-alu0101316734</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>